- hosts: servers
  tasks:
  - name: create directory
    ansible.builtin.file:
      path: /home/test
      state: directory
      mode: 0755

  - name: copy dockerfile
    ansible.builtin.template:
      src: ./docker/paint.dockerfile
      dest: /home/test/paint.dockerfile
      owner: root
      group: root
      mode: 0755

  - name: build image
    shell:
      chdir: /home/test/
      cmd: "sudo docker build -t paint -f paint.dockerfile ."

  - name: run container
    shell:
      chdir: /home/test/
      cmd: "sudo docker run -d -p 8081:8080 --name app paint"
